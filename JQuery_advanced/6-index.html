<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Task 2</title>
    <script
      src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
      integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
      crossorigin="anonymous"
    ></script>
    <style>
      .remove-cell {
        background-color: orange;
        cursor: pointer;
        text-align: center;
        font-weight: bold;
        width: 30px;
      }
    </style>
  </head>

  <body>
    <script type="application/javascript">
      function createFamilyTree() {
        $("body").append(
          $("<table>").append(
            $("<thead>").append(
              $("<tr>").append(
                $("<th>").text("Firstname"),
                $("<th>").text("Lastname")
              )
            ),
            $("<tbody>")
          )
        );
      }
      function addNewMember(firstName, lastName, position) {
        const newRow = $("<tr>").append(
          $("<td>").text(firstName),
          $("<td>").text(lastName),
          $("<td>")
            .text("(x)")
            .addClass("remove-cell")
            .on("click", function () {
              $(this).parent().remove();
            })
        );

        if (position === "before") {
          $("tbody").prepend(newRow);
        } else {
          $("tbody").append(newRow);
        }
      }

      function createForm() {
        const firstInput = $(`<input type="text">`);
        const lastInput = $(`<input type="text">`);
        const positionSelect = $("<select>").append(
          $('<option value="before">').text("Before"),
          $('<option value="after">').text("After")
        );
        const submitInput = $(`<input type="submit">`);
        submitInput.on("click", function (event) {
          event.preventDefault();
          addNewMember(firstInput.val(), lastInput.val(), positionSelect.val());
        });
        $("table").before(firstInput, lastInput, positionSelect, submitInput);
      }

      createFamilyTree();
      createForm();
    </script>
  </body>
</html>
